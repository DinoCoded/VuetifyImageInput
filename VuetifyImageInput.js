(function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b(require("paperduck")):"function"==typeof define&&define.amd?define(["paperduck"],b):a.VuetifyImageInput=b(a.PaperDuck)})(this,function(a){"use strict";function b(a){return function(){return a}}function c(a){return"function"==typeof a}function d(a){return c(a)?a:b(a)}function e(){}function f(b){var c=this;a.load(b).then(function(a){c.image=a.cover(c.imageWidth,c.imageHeight)}).catch(e)}a=a&&a.hasOwnProperty("default")?a["default"]:a;var g={disabled:{type:Boolean,default:!1},uploadIcon:{type:[Function,String],default:"cloud_upload"},uploadIconStyle:[Function,Object]},h={clearable:{type:Boolean,default:!1},clearIcon:{type:[Function,String],default:function(){return this.$vuetify.icons.clear}},disabled:{type:Boolean,default:!1},flipHorizontallyIcon:{type:[Function,String],default:"flip"},flipHorizontallyIconStyle:[Function,Object],flipHorizontallyText:{type:[Function,String],default:"flip horizontally"},flipVerticallyIcon:{type:[Function,String],default:"flip"},flipVerticallyIconStyle:{type:[Function,Object],default:b({transform:"rotate(90deg)"})},flipVerticallyText:{type:[Function,String],default:"flip vertically"},fullHeight:{type:Boolean,default:!1},fullWidth:{type:Boolean,default:!1},hideActions:{type:Boolean,default:!1},imageEncoderOptions:{},imageHeight:{type:Number,default:256},imageType:{type:String,default:"png"},imageWidth:{type:Number,default:256},readonly:{type:Boolean,default:!1},rotateClockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateClockwiseIconStyle:{type:[Function,Object],default:b({transform:"scaleX(-1)"})},rotateClockwiseText:{type:[Function,String],default:"rotate clockwise"},rotateCounterclockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateCounterclockwiseIconStyle:[Function,Object],rotateCounterclockwiseText:{type:[Function,String],default:"rotate counterclockwise"},uploadIcon:{type:[Function,String],default:"cloud_upload"},uploadIconStyle:[Function,Object],value:String},i={name:"VImageInput",components:{MyUploader:{inject:{theme:{default:{isDark:!1}}},props:g,methods:{onChange:function(a){var b=a.target.files;b&&this.uploadFiles(b)},onClick:function(){var a=this,b=a.disabled;if(!b){var c=this,d=c.$refs;d.input.value=null,d.input.click()}},onDragLeave:function(a){a.preventDefault()},onDragOver:function(a){a.preventDefault()},onDrop:function(a){a.preventDefault();var b=this,c=b.disabled;if(!c){var d=a.dataTransfer.files;d&&this.uploadFiles(d)}},uploadFile:function(a){var b=this,c=new FileReader;c.addEventListener("load",function(){b.$emit("load",c.result)}),c.readAsDataURL(a)},uploadFiles:function(a){a.length&&this.uploadFile(a[0])}},render:function(a){var b=this,c=b.onChange,e=b.onClick,f=b.onDragLeave,g=b.onDragOver,h=b.onDrop,i=b.theme,j=b.uploadIcon,k=b.uploadIconStyle;return j=d(j).call(this),k=d(k).call(this),a("div",{style:{alignItems:"center",border:"1px dashed rgba("+(i.isDark?"255,255,255,0.7":"0,0,0,0.54")+")",borderRadius:"6px",cursor:"pointer",display:"flex",justifyContent:"center"},on:{dragleave:f,dragover:g,drop:h,click:e}},[a("input",{style:{display:"none"},attrs:{type:"file"},on:{change:c},ref:"input"}),a("v-icon",{style:k,props:{large:!0}},j)])}}},inject:{theme:{default:{isDark:!1}}},props:h,data:function(){return{lazyImage:void 0}},computed:{checkeredBackground:function(){return["url('data:image/svg+xml;base64,"+btoa("<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 2 2\" fill-opacity=\"0.2\"><rect x=\"1\" width=\"1\" height=\"1\"/><rect y=\"1\" width=\"1\" height=\"1\"/></svg>")+"')","center center / 16px 16px","repeat","#fff"].join(" ")},image:{get:function(){return this.lazyImage},set:function(a){this.lazyImage=a,this.$emit("input",this.internalValue)}},internalValue:function(){return this.image?this.image.toDataURL("image/"+this.imageType,this.imageEncoderOptions):null}},watch:{value:{handler:function(b){this.internalValue!==b&&(this.lazyImage=a.from(b))},immediate:!0}},methods:{clear:function(){this.image=null},createActionButtonElement:function(a,b,c,e,f){var g=this,h=g.disabled,i=g.readonly;c=d(c).call(this),e=d(e).call(this),f=d(f).call(this);var j,k={class:"ma-1",props:{disabled:h||i,flat:!0,icon:!0},on:{click:b}},l=function(){j=a("v-btn",k,[a("v-icon",{style:e},c)])};return f?(k.slot="activator",l(),j=a("v-tooltip",{props:{right:!0}},[j,a("span",f)])):l(),j},createClearButtonElement:function(a){var b=this,c=b.clear,e=b.clearIcon,f=b.disabled;return e=d(e).call(this),a("v-btn",{class:"ma-1",props:{disabled:f,flat:!0,icon:!0},on:{click:c}},[a("v-icon",e)])},createFlipHorizontallyButtonElement:function(a){var b=this,c=b.flipHorizontally,d=b.flipHorizontallyIcon,e=b.flipHorizontallyIconStyle,f=b.flipHorizontallyText;return this.createActionButtonElement(a,c,d,e,f)},createFlipVerticallyButtonElement:function(a){var b=this,c=b.flipVertically,d=b.flipVerticallyIcon,e=b.flipVerticallyIconStyle,f=b.flipVerticallyText;return this.createActionButtonElement(a,c,d,e,f)},createRotateClockwiseButtonElement:function(a){var b=this,c=b.rotateClockwise,d=b.rotateClockwiseIcon,e=b.rotateClockwiseIconStyle,f=b.rotateClockwiseText;return this.createActionButtonElement(a,c,d,e,f)},createRotateCounterclockwiseButtonElement:function(a){var b=this,c=b.rotateCounterclockwise,d=b.rotateCounterclockwiseIcon,e=b.rotateCounterclockwiseIconStyle,f=b.rotateCounterclockwiseText;return this.createActionButtonElement(a,c,d,e,f)},flipHorizontally:function(){this.image=this.image.flop()},flipVertically:function(){this.image=this.image.flip()},rotateClockwise:function(){this.image=this.image.rotate90()},rotateCounterclockwise:function(){this.image=this.image.rotate270()},upload:f},render:function(a){var b=this,c=b.checkeredBackground,d=b.clearable,e=b.disabled,f=b.fullHeight,g=b.fullWidth,h=b.hideActions,i=b.image,j=b.imageHeight,k=b.imageWidth,l=b.readonly,m=b.upload,n=b.uploadIcon,o=b.uploadIconStyle;return a("div",{style:Object.assign({},{display:"table",height:0,width:0},g?{minWidth:"100%"}:{},f?{minHeight:"100%"}:{})},[a("div",{style:{display:"table-row"}},[a("div",{style:{display:"table-cell",height:"100%",position:"relative",width:"100%"}},[a("div",{style:Object.assign({},{alignItems:"center",background:c,display:"flex",flexGrow:1,justifyContent:"center",minHeight:j+"px",minWidth:k+"px",width:"100%",height:"100%"},i?{}:{opacity:0,visibility:"hidden"})},[].concat(i?[a("img",{attrs:{src:i.toDataURL()}})]:[]))].concat(i?[]:a("my-uploader",{props:{disabled:e||l,uploadIcon:n,uploadIconStyle:o},style:{bottom:0,left:0,position:"absolute",right:0,top:0},on:{load:m}}))),a("div",{style:Object.assign({},{display:"table-cell",verticalAlign:"top"},i?{}:{opacity:0,visibility:"hidden"})},[a("div",{style:{display:"flex",flexDirection:"column",height:"100%",width:"100%"}},(d?[this.createClearButtonElement(a),a("v-spacer")]:[]).concat(h?[]:[this.createFlipHorizontallyButtonElement(a),this.createFlipVerticallyButtonElement(a),this.createRotateClockwiseButtonElement(a),this.createRotateCounterclockwiseButtonElement(a)]))])])])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(i.name,i),i});
