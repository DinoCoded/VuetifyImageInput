!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("paperduck")):"function"==typeof define&&define.amd?define(["paperduck"],e):t.VuetifyImageInput=e(t.PaperDuck)}(this,function(i){"use strict";function e(t){return function(){return t}}function s(t){return"function"==typeof t?t:e(t)}i=i&&i.hasOwnProperty("default")?i.default:i;function n(){}var t={name:"VImageInput",props:{clearable:{type:Boolean,default:!1},clearIcon:{type:[Function,String],default:function(){return this.$vuetify.icons.clear}},flipHorizontallyIcon:{type:[Function,String],default:"flip"},flipHorizontallyIconStyle:[Function,Object],flipHorizontallyText:{type:[Function,String],default:"flip horizontally"},flipVerticallyIcon:{type:[Function,String],default:"flip"},flipVerticallyIconStyle:{type:[Function,Object],default:e({transform:"rotate(90deg)"})},flipVerticallyText:{type:[Function,String],default:"flip vertically"},hideActions:{type:Boolean,default:!1},imageEncoderOptions:{},imageHeight:{type:Number,default:256},imageType:{type:String,default:"png"},imageWidth:{type:Number,default:256},rotateClockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateClockwiseIconStyle:{type:[Function,Object],default:e({transform:"scaleX(-1)"})},rotateClockwiseText:{type:[Function,String],default:"rotate clockwise"},rotateCounterclockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateCounterclockwiseIconStyle:[Function,Object],rotateCounterclockwiseText:{type:[Function,String],default:"rotate counterclockwise"},value:String},data:function(){return{lazyImage:void 0}},computed:{checkeredBackgroundImage:function(){return"url('data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2" fill-opacity="0.2"><rect x="1" width="1" height="1"/><rect y="1" width="1" height="1"/></svg>')+"')"},clearButtonElement:function(){var t=this,e=t.$createElement,i=t.clear,n=t.clearIcon;return e("v-btn",{props:{flat:!0,icon:!0},on:{click:i}},[e("v-icon",n=s(n).call(this))])},cropperElement:function(){var t=this,e=t.$createElement,i=t.checkeredBackgroundImage,n=t.image,o={style:{backgroundImage:i,backgroundRepeat:"repeat",backgroundSize:"16px 16px",height:t.imageHeight+"px",width:t.imageWidth+"px"}},l=[];if(n){Object.assign(o.style,{alignItems:"center",display:"flex",justifyContent:"center"});var a=e("img",{attrs:{src:n.toDataURL()}});l.push(a)}return e("div",o,l)},editorElement:function(){var t=this,e=t.$createElement,i=t.clearable,n=t.cropperElement,o=t.showActions,l=[];if(i){var a=this.clearButtonElement;l.push(a,e("v-spacer"))}if(o){var r=this.flipHorizontallyButtonElement,c=this.flipVerticallyButtonElement,u=this.rotateClockwiseButtonElement,s=this.rotateCounterclockwiseButtonElement;l.push(r,c,u,s)}return l.length?e("div",{style:{display:"flex"}},[n,e("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"center"}},l)]):n},flipHorizontallyButtonElement:function(){var t=this,e=t.$createElement,i=t.flipHorizontally,n=t.flipHorizontallyIcon,o=t.flipHorizontallyIconStyle,l=t.flipHorizontallyText;n=s(n).call(this),o=s(o).call(this),l=s(l).call(this);var a,r=e("v-icon",{style:o},n),c={props:{flat:!0,icon:!0},on:{click:i}},u=function(){a=e("v-btn",c,[r])};return l?(c.slot="activator",u(),a=e("v-tooltip",{props:{right:!0}},[a,e("span",l)])):u(),a},flipVerticallyButtonElement:function(){var t=this,e=t.$createElement,i=t.flipVertically,n=t.flipVerticallyIcon,o=t.flipVerticallyIconStyle,l=t.flipVerticallyText;n=s(n).call(this),o=s(o).call(this),l=s(l).call(this);var a,r=e("v-icon",{style:o},n),c={props:{flat:!0,icon:!0},on:{click:i}},u=function(){a=e("v-btn",c,[r])};return l?(c.slot="activator",u(),a=e("v-tooltip",{props:{right:!0}},[a,e("span",l)])):u(),a},image:{get:function(){return this.lazyImage},set:function(t){this.lazyImage=t,this.$emit("input",this.internalValue)}},internalValue:function(){return this.image?this.image.toDataURL("image/"+this.imageType,this.imageEncoderOptions):null},rotateClockwiseButtonElement:function(){var t=this,e=t.$createElement,i=t.rotateClockwise,n=t.rotateClockwiseIcon,o=t.rotateClockwiseIconStyle,l=t.rotateClockwiseText;n=s(n).call(this),o=s(o).call(this),l=s(l).call(this);var a,r=e("v-icon",{style:o},n),c={props:{flat:!0,icon:!0},on:{click:i}},u=function(){a=e("v-btn",c,[r])};return l?(c.slot="activator",u(),a=e("v-tooltip",{props:{right:!0}},[a,e("span",l)])):u(),a},rotateCounterclockwiseButtonElement:function(){var t=this,e=t.$createElement,i=t.rotateCounterclockwise,n=t.rotateCounterclockwiseIcon,o=t.rotateCounterclockwiseIconStyle,l=t.rotateCounterclockwiseText;n=s(n).call(this),o=s(o).call(this),l=s(l).call(this);var a,r=e("v-icon",{style:o},n),c={props:{flat:!0,icon:!0},on:{click:i}},u=function(){a=e("v-btn",c,[r])};return l?(c.slot="activator",u(),a=e("v-tooltip",{props:{right:!0}},[a,e("span",l)])):u(),a},showActions:function(){return!this.hideActions},uploaderElement:function(){var t=this.$createElement;return t("div",{style:{alignItems:"center",backgroundColor:"#eeeeee",border:"1px dashed #bdbdbd",borderRadius:"8px",bottom:0,display:"flex",justifyContent:"center",left:0,position:"absolute",right:0,top:0}},[t("v-btn",{props:{color:"primary",fab:!0,large:!0},on:{click:this.upload}},[t("v-icon","cloud_upload")])])}},watch:{value:{handler:function(t){this.internalValue!==t&&(this.lazyImage=i.from(t))},immediate:!0}},methods:{clear:function(){this.image=null},flipHorizontally:function(){this.image=this.image.flop()},flipVertically:function(){this.image=this.image.flip()},rotateClockwise:function(){this.image=this.image.rotate90()},rotateCounterclockwise:function(){this.image=this.image.rotate270()},upload:function(){var e=this,t=document.createElement("input");t.type="file",t.addEventListener("change",function(){i.load(t).then(function(t){e.image=t.scaleMin(e.imageWidth,e.imageHeight)}).catch(n)}),t.click()}},render:function(t){var e=this.editorElement;if(this.image)return e;var i=this.uploaderElement;return t("div",{key:0,style:{display:"inline",position:"relative"}},[t("div",{style:{visibility:"hidden"}},[e]),i])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(t.name,t),t});
