!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("paperduck")):"function"==typeof define&&define.amd?define(["paperduck"],e):t.VuetifyImageInput=e(t.PaperDuck)}(this,function(i){"use strict";function e(t){return function(){return t}}i=i&&i.hasOwnProperty("default")?i.default:i;function c(t){return"function"==typeof t?t:e(t)}function n(){}var t={name:"VImageInput",props:{clearable:{type:Boolean,default:!1},clearIcon:{type:[Function,String],default:function(){return this.$vuetify.icons.clear}},flipHorizontallyIcon:{type:[Function,String],default:"flip"},flipHorizontallyIconStyle:[Function,Object],flipHorizontallyText:{type:[Function,String],default:"flip horizontally"},flipVerticallyIcon:{type:[Function,String],default:"flip"},flipVerticallyIconStyle:{type:[Function,Object],default:e({transform:"rotate(90deg)"})},flipVerticallyText:{type:[Function,String],default:"flip vertically"},hideActions:{type:Boolean,default:!1},imageEncoderOptions:{},imageHeight:{type:Number,default:256},imageType:{type:String,default:"png"},imageWidth:{type:Number,default:256},rotateClockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateClockwiseIconStyle:{type:[Function,Object],default:e({transform:"scaleX(-1)"})},rotateClockwiseText:{type:[Function,String],default:"rotate clockwise"},rotateCounterclockwiseIcon:{type:[Function,String],default:"rotate_90_degrees_ccw"},rotateCounterclockwiseIconStyle:[Function,Object],rotateCounterclockwiseText:{type:[Function,String],default:"rotate counterclockwise"},uploadIcon:{type:[Function,String],default:"cloud_upload"},uploadIconStyle:[Function,Object],value:String},data:function(){return{lazyImage:void 0}},computed:{checkeredBackgroundImage:function(){return"url('data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2" fill-opacity="0.2"><rect x="1" width="1" height="1"/><rect y="1" width="1" height="1"/></svg>')+"')"},image:{get:function(){return this.lazyImage},set:function(t){this.lazyImage=t,this.$emit("input",this.internalValue)}},internalValue:function(){return this.image?this.image.toDataURL("image/"+this.imageType,this.imageEncoderOptions):null}},watch:{value:{handler:function(t){this.internalValue!==t&&(this.lazyImage=i.from(t))},immediate:!0}},methods:{clear:function(){this.image=null},createActionButtonElement:function(t,e,i,n){var o=this.$createElement;e=c(e).call(this),i=c(i).call(this),n=c(n).call(this);var l,a={props:{flat:!0,icon:!0},on:{click:t}},r=function(){l=o("v-btn",a,[o("v-icon",{style:i},e)])};return n?(a.slot="activator",r(),l=o("v-tooltip",{props:{right:!0}},[l,o("span",n)])):r(),l},createClearButtonElement:function(){var t=this,e=t.$createElement,i=t.clear,n=t.clearIcon;return e("v-btn",{props:{flat:!0,icon:!0},on:{click:i}},[e("v-icon",n=c(n).call(this))])},createCropperElement:function(){var t=this,e=t.$createElement,i=t.checkeredBackgroundImage,n=t.image,o={style:{backgroundImage:i,backgroundRepeat:"repeat",backgroundSize:"16px 16px",height:t.imageHeight+"px",width:t.imageWidth+"px"}},l=[];if(n){Object.assign(o.style,{alignItems:"center",display:"flex",justifyContent:"center"});var a=e("img",{attrs:{src:n.toDataURL()}});l.push(a)}return e("div",o,l)},createEditorElement:function(){var t=this.$createElement,e=this.clearable,i=this.hideActions,n=this.createCropperElement(),o=[];return e&&o.push(this.createClearButtonElement(),t("v-spacer")),i||o.push(this.createFlipHorizontallyButtonElement(),this.createFlipVerticallyButtonElement(),this.createRotateClockwiseButtonElement(),this.createRotateCounterclockwiseButtonElement()),o.length&&(n=t("div",{style:{display:"flex"}},[n,t("div",{style:{display:"flex",flexDirection:"column",flexWrap:"wrap",justifyContent:"center"}},o)])),n},createFlipHorizontallyButtonElement:function(){var t=this.flipHorizontally,e=this.flipHorizontallyIcon,i=this.flipHorizontallyIconStyle,n=this.flipHorizontallyText;return this.createActionButtonElement(t,e,i,n)},createFlipVerticallyButtonElement:function(){var t=this.flipVertically,e=this.flipVerticallyIcon,i=this.flipVerticallyIconStyle,n=this.flipVerticallyText;return this.createActionButtonElement(t,e,i,n)},createRotateClockwiseButtonElement:function(){var t=this.rotateClockwise,e=this.rotateClockwiseIcon,i=this.rotateClockwiseIconStyle,n=this.rotateClockwiseText;return this.createActionButtonElement(t,e,i,n)},createRotateCounterclockwiseButtonElement:function(){var t=this.rotateCounterclockwise,e=this.rotateCounterclockwiseIcon,i=this.rotateCounterclockwiseIconStyle,n=this.rotateCounterclockwiseText;return this.createActionButtonElement(t,e,i,n)},createUploaderElement:function(){var t=this.$createElement,e=this.upload,i=this.uploadIcon,n=this.uploadIconStyle;return i=c(i).call(this),t("v-card",{props:{flat:!0},style:{alignItems:"center",bottom:0,display:"flex",justifyContent:"center",left:0,position:"absolute",right:0,top:0}},[t("v-btn",{props:{color:"primary",fab:!0,large:!0},on:{click:e}},[t("v-icon",{style:n=c(n).call(this)},i)])])},flipHorizontally:function(){this.image=this.image.flop()},flipVertically:function(){this.image=this.image.flip()},rotateClockwise:function(){this.image=this.image.rotate90()},rotateCounterclockwise:function(){this.image=this.image.rotate270()},upload:function(){var e=this,t=document.createElement("input");t.type="file",t.addEventListener("change",function(){i.load(t).then(function(t){e.image=t.scaleMin(e.imageWidth,e.imageHeight)}).catch(n)}),t.click()}},render:function(t){var e=[this.createEditorElement()];return this.image||e.push(this.createUploaderElement()),t("div",{style:{display:"inline",position:"relative"}},e)}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(t.name,t),t});
