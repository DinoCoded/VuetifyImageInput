!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).VuetifyImageInput=e()}(this,(function(){"use strict";function t(){return(this.overriddenMaxZoom-this.overriddenMinZoom)/1e3}var e={dark:function(){return this.theme.isDark},originalImageDataURL:function(){var t=this.originalImage;return t?t.src:null},originalImageHeight:function(){var t=this.originalImage;return t?t.naturalHeight:0},originalImageWidth:function(){var t=this.originalImage;return t?t.naturalWidth:0},overriddenMaxZoom:function(){return 2},overriddenMinZoom:function(){return 1},rtl:t,zoomDelta:function(){return(this.overriddenMaxZoom-this.overriddenMinZoom)/10},zoomSnap:t};function i(){}var n={theme:{default:{isDark:!1}}};var o={clear:function(){this.originalImage=null},flipHorizontally:function(){},flipVertically:function(){},load:function(){},rotateClockwise:function(){},rotateCounterClockwise:function(){},setScaling:function(t){this.scaling=t},setZooming:function(t){this.zoom=t},zoomIn:function(){var t=this.zoomDelta;this.zoom+=t},zoomOut:function(){var t=this.zoomDelta;this.zoom-=t}},r={type:Boolean,default:!1},a={type:Boolean,default:!1},l={type:Boolean,default:!1},c={type:Boolean,default:!1},d={type:Boolean,default:!1},s={type:Boolean,default:!1},u={type:Boolean,default:!1},f={type:Boolean,default:!1},p={cancelIcon:{type:String,default:"$cancel"},clearable:r,clearIcon:{type:String,default:"$clear"},disabled:a,errorIcon:{type:String,default:"$error"},flipHorizontallyIcon:{type:String,default:"mdi-flip-horizontal"},flippable:l,flipVerticallyIcon:{type:String,default:"mdi-flip-vertical"},fullHeight:c,fullWidth:d,hideActions:s,imageBackgroundColor:String,imageHeight:{type:Number,default:256},imageWidth:{type:Number,default:256},rotatable:u,rotateClockwiseIcon:{type:String,default:"mdi-rotate-right"},rotateCounterClockwiseIcon:{type:String,default:"mdi-rotate-left"},successIcon:{type:String,default:"$success"},uploadIcon:{type:String,default:"mdi-upload"},value:String,zoomable:f,zoomInIcon:{type:String,default:"mdi-magnify-plus-outline"},zoomOutIcon:{type:String,default:"mdi-magnify-minus-outline"}};var g={functional:!0,render:function(t,e){var i=e.listeners,n=e.parent,o=e.props;return t("VBtn",{class:"ma-1",props:{disabled:n.disabled,flat:!0,icon:!0},on:i},[t("VIcon",o.icon)])}};var h={functional:!0,render:function(t,e){var i=e.parent,n=i.clear,o=i.clearIcon;return t(g,{props:{icon:o},on:{click:n}})}};var m={functional:!0,render:function(t,e){var i=e.parent,n=i.flipHorizontally,o=i.flipHorizontallyIcon;return t(g,{props:{icon:o},on:{click:n}})}};var v={functional:!0,render:function(t,e){var i=e.parent,n=i.flipVertically,o=i.flipVerticallyIcon;return t(g,{props:{icon:o},on:{click:n}})}};var y={props:["height","width"],data:function(){return{forcedHeight:this.height,forcedWidth:this.width,scaling:1}},watch:{height:function(t){this.forcedHeight=t},scaling:function(t){this.$emit("setScaling",t)},width:function(t){this.forcedWidth=t}},mounted:function(){var t,e,i,n,o=this;t=function(){if(o._isDestroyed)return!1;o.update()},e=1e3,(i=function(i){requestAnimationFrame((function(){!1!==t()&&setTimeout(i,e)}))},n=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return i.call.apply(i,[this,n].concat(t))})()},methods:{update:function(){var t=this.$el,e=this.forcedHeight,i=this.forcedWidth,n=this.height,o=this.width;if(t){var r=t.offsetHeight,a=t.offsetWidth;a<i?(i=o,e=a*n/o):r<e?(e=n,i=r*o/n):(i=o,e=n);var l=Math.min(a/o,r/n);Object.assign(this,{forcedHeight:e,forcedWidth:i,scaling:l})}}},render:function(t){var e=this.forcedWidth;return t("div",{style:{display:"grid",opacity:0,overflow:"hidden",pointerEvents:"none",visibility:"hidden"}},[t("div",{style:{height:this.forcedHeight+"px",width:e+"px"}})])}};var b={functional:!0,render:function(t,e){var i=e.parent,n=i.rotateClockwise,o=i.rotateClockwiseIcon;return t(g,{props:{icon:o},on:{click:n}})}};var w={functional:!0,render:function(t,e){var i=e.parent,n=i.rotateCounterClockwise,o=i.rotateCounterClockwiseIcon;return t(g,{props:{icon:o},on:{click:n}})}};var I={functional:!0,render:function(t,e){var i=e.data.style;return t("div",{style:Object.assign({},{border:"4px dashed #ccc",borderRadius:"4px"},i)})}},x="#fff url('data:image/svg+xml;base64,"+btoa('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2" fill-opacity="0.2"><rect x="1" width="1" height="1"/><rect y="1" width="1" height="1"/></svg>')+"') repeat center center / 16px 16px";var z={functional:!0,render:function(t,e){var i=e.data,n=e.parent,o=i.style,r=n.imageHeight,a=n.imageWidth,l=n.scaling;return t("div",{style:Object.assign({},{background:x,border:"1px solid #ccc",borderRadius:"4px",overflow:"hidden"},o)},[t("div",{style:{border:"4px solid #fff",bottom:"50%",boxShadow:"0 0 4000px 4000px rgba(0,0,0,0.5)",height:r*l+"px",pointerEvents:"none",position:"absolute",right:"50%",transform:"translate(50%,50%)",width:a*l+"px"}})])}};var S={functional:!0,render:function(t,e){var i=e.parent,n=i.disabled,o=i.overriddenMaxZoom,r=i.overriddenMinZoom,a=i.setZooming,l=i.zoomIn,c=i.zooming,d=i.zoomInIcon,s=i.zoomOut;return t("VSlider",{class:"ma-1",props:{appendIcon:d,disabled:n,hideDetails:!0,max:o,min:r,prependIcon:i.zoomOutIcon,step:i.zoomSnap,value:c},on:{input:a,"click:append":l,"click:prepend":s}})}};var k={name:"VImageInput",inject:n,props:p,data:function(){return{cancelLoad:i,loadError:!1,loading:!1,loadProgress:0,loadSuccess:!1,image:!0,zooming:1,scaling:1}},computed:e,watch:{disabled:function(t){var e=this.cancelLoad;t&&e()}},beforeCreate:function(){var t={originalImage:null},e=this.$options.computed;Object.keys(t).forEach((function(i){e[i]={get:function(){return t[i]},set:function(e){t[i]=e}}}))},methods:o,render:function(t){var e=this,i=e.clearable,n=e.flippable,o=e.fullHeight,r=e.fullWidth,a=e.image,l=e.imageHeight,c=e.imageWidth,d=e.rotatable,s=e.setScaling,u=e.zoomable;return t("div",{style:Object.assign({},{display:["-ms-inline-grid","inline-grid"],gridColumns:"1fr auto",gridRows:"1fr auto",gridTemplateColumns:"1fr auto",gridTemplateRows:"1fr auto"},o?{height:"100%"}:{},r?{width:"100%"}:{})},[t("div",{style:{display:"grid",gridColumn:1,gridRow:1,overflow:"hidden",position:"relative"}},[t(y,{style:{margin:"50px"},props:{width:c,height:l},on:{setScaling:s}}),t("VFadeTransition",{props:{leaveAbsolute:!0}},[t(a?z:I,{style:{bottom:0,left:0,position:"absolute",right:0,top:0}})])]),t("div",{style:Object.assign({},{display:"flex",flexDirection:"column",gridColumn:2,gridRow:1,justifyContent:"center",transition:"opacity 0.3s cubic-bezier(0.25,0.8,0.5,1)"},a?{}:{opacity:0,pointerEvents:"none"})},(i?[t(h),t("VSpacer")]:[]).concat(d?[t(b),t(w)]:[],n?[t(m),t(v)]:[])),t("div",{style:Object.assign({},{gridColumn:1,gridRow:2,transition:"opacity 0.3s cubic-bezier(0.25,0.8,0.5,1)"},a?{}:{opacity:0,pointerEvents:"none"})},u?[t(S)]:[])])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(k.name,k),k}));
