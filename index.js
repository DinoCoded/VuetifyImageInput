!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VuetifyImageInput=t()}(this,(function(){"use strict";var e={get:function(){return this.frozenOriginalImage.value},set:function(e){this.frozenOriginalImage=Object.freeze({value:e})}};function t(){}function n(e){return new Promise((function(t){setTimeout(t,e)}))}var r={clear:function(){this.originalImage=null},load:function(e){var r,o=this;r=function(){var r=o.cancelLoad;r();var a=!1,i=function(){if(a)throw 0},l=t;return r=function(){a=!0,l()},Object.assign(o,{cancelLoad:r,loadError:!1,loadSuccess:!1,loading:!0,loadProgress:0}),n(1e3).then((function(){i();var r=new FileReader,a=new Promise((function(e,t){r.addEventListener("progress",(function(e){e.lengthComputable&&Object.assign(o,{loadProgress:e.loaded/e.total})})),r.addEventListener("load",e),r.addEventListener("abort",t),r.addEventListener("error",t)}));return l=function(){r.abort()},r.readAsDataURL(e),a.then((function(){i();var e=new Image,a=new Promise((function(t,n){e.addEventListener("load",t),e.addEventListener("error",n)}));return l=t,e.src=r.result,n(1e3).then((function(){return a})).then((function(){return i(),Object.assign(o,{loadSuccess:!0}),n(5e3).then((function(){i(),Object.assign(o,{originalImage:e})}))}))}))})).catch((function(){a||Object.assign(o,{loadError:!0})})).finally((function(){a||Object.assign(o,{cancelLoad:t,loading:!1})}))},new Promise((function(e){e(r())}))}},o={type:Boolean,default:!1},a={type:Boolean,default:!1},i={type:Boolean,default:!1},l={type:Boolean,default:!1},c={type:Boolean,default:!1},d={type:Boolean,default:!1};var s={name:"VImageInput",components:{MyFileUpload:{props:{disabled:{}},data:function(){return{dragEnter:!1}},computed:{active:function(){return!this.disabled&&!!this.dragEnter}},methods:{onClick:function(e){var t=this;if(e.preventDefault(),!this.disabled){var n=document.createElement("input");n.setAttribute("type","file"),n.addEventListener("change",(function(e){e.preventDefault();var n=e.target.files;n&&n.length&&t.$emit("load",n[0])})),n.click()}},onDragEnter:function(e){e.preventDefault(),this.dragEnter=!0},onDragLeave:function(e){e.preventDefault(),this.dragEnter=!1},onDragOver:function(e){e.preventDefault()},onDrop:function(e){if(e.preventDefault(),this.dragEnter=!1,!this.disabled){var t=e.dataTransfer.files;t&&1===t.length&&this.$emit("load",t[0])}}},render:function(){var e=this.$scopedSlots,t=this.active,n=this.onClick,r=this.onDragEnter,o=this.onDragLeave,a=this.onDragOver,i=this.onDrop;return e.default({active:t,onClick:n,onDragEnter:r,onDragLeave:o,onDragOver:a,onDrop:i})}},MyImageUpload:{functional:!0,render:function(e,t){var n=t.data,r=t.parent,o=r.cancelIcon,a=r.cancelIconStyle,i=r.cancelLoad,l=r.disabled,c=r.errorIcon,d=r.errorIconStyle,s=r.load,u=r.loadError,g=r.loading,f=r.loadProgress,p=r.loadSuccess,y=r.successIcon,h=r.successIconStyle,v=r.uploadIcon,m=r.uploadIconStyle,I=n.style;return e("MyFileUpload",{props:{disabled:l||g},on:{load:s},scopedSlots:{default:function(t){t.active;var n=t.onClick,r=t.onDragEnter,s=t.onDragLeave,S=t.onDragOver,b=t.onDrop;return e("VCard",{style:Object.assign({},{alignItems:"center",display:"flex",justifyContent:"center",position:"relative"},I),props:{disabled:l,outlined:!0},on:{click:n,dragenter:r,dragleave:s,dragover:S,drop:b}},[e("VFadeTransition",{props:{leaveAbsolute:!0}},[function(){if(p)return e("VIcon",{style:h,props:{color:"success",large:!0},key:1},y);if(u)return e("VIcon",{style:d,props:{color:"error",large:!0},key:2},c);if(g){var t=100*f;return e("VProgressCircular",{props:{color:"primary",indeterminate:!t,rotate:-90,size:64,value:t,width:4}},[e("VBtn",{props:{icon:!0,large:!0,text:!0},on:{click:i}},[e("VIcon",{style:a},o)])])}return e("VIcon",{style:m,props:{large:!0},key:0},v)}()])])}}})}}},props:{cancelIcon:{type:String,default:"$cancel"},cancelIconStyle:Object,clearable:o,clearIcon:{type:String,default:"$clear"},clearIconStyle:Object,debounce:{type:Number,default:0},disabled:a,errorIcon:{type:String,default:"$error"},errorIconStyle:Object,flipHorizontallyIcon:{type:String,default:"mdi-flip-horizontal"},flipHorizontallyIconStyle:Object,flipVerticallyIcon:{type:String,default:"mdi-flip-vertical"},flipVerticallyIconStyle:Object,fullHeight:i,fullWidth:l,hideActions:c,imageBackgroundColor:String,imageFormat:{type:String,default:"png"},imageHeight:{type:Number,default:256},imageMaxScaling:{type:Number,default:1},imageMinScaling:{type:String,default:"cover"},imageQuality:{},imageWidth:{type:Number,default:256},name:String,overlayBackgroundColor:{type:String,default:"rgba(0,0,0,0.5)"},overlayBorderColor:{type:String,default:"#fff"},overlayBorderWidth:{type:String,default:"4px"},overlayPadding:{type:String,default:"50px"},readonly:d,rotateClockwiseIcon:{type:String,default:"mdi-rotate-right"},rotateClockwiseIconStyle:Object,rotateCounterClockwiseIcon:{type:String,default:"mdi-rotate-left"},rotateCounterClockwiseIconStyle:Object,successIcon:{type:String,default:"$success"},successIconStyle:Object,uploadIcon:{type:String,default:"mdi-upload"},uploadIconStyle:Object,value:String,backgroundColor:{},maxScaling:{},minScaling:{},rotateCounterclockwiseIcon:{},rotateCounterclockwiseIconStyle:{},scalingSliderColor:{}},data:function(){return{cancelLoad:t,frozenOriginalImage:Object.freeze({value:null}),loadError:!1,loading:!1,loadProgress:0,loadSuccess:!1}},computed:{originalImage:e,originalImageDataURL:function(){var e=this.originalImage;return e?e.src:null},originalImageHeight:function(){var e=this.originalImage;return e?e.naturalHeight:0},originalImageWidth:function(){var e=this.originalImage;return e?e.naturalWidth:0}},methods:r,render:function(e){var t=this.fullHeight,n=this.fullWidth,r=this.loadError,o=this.loading,a=this.loadProgress,i=this.loadSuccess,l=this.originalImageHeight,c=this.originalImageWidth;return e("div",{style:Object.assign({},t?{height:"100%"}:{},n?{width:"100%"}:{})},[e("MyImageUpload",{style:{height:"100%",width:"100%"}}),e("div","loadError: "+r),e("div","loadSuccess: "+i),e("div","loading: "+o),e("div","loadProgress: "+a),e("div","originalImageWidth: "+c),e("div","originalImageHeight: "+l)])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(s.name,s),s}));
