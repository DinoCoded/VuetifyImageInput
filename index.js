!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VuetifyImageInput=t()}(this,(function(){"use strict";var e={functional:!0,render:function(e,t){var n=t.data,o=t.parent,r=o.cancelIcon,a=o.cancelIconStyle,i=o.cancelLoad,l=o.disabled,c=o.errorIcon,s=o.errorIconStyle,d=o.load,u=o.loadError,g=o.loading,f=o.loadProgress,p=o.loadSuccess,y=o.readonly,v=o.successIcon,h=o.successIconStyle,m=o.uploadIcon,I=o.uploadIconStyle,S=n.style;return e("MyFileUpload",{props:{disabled:l||g},on:{load:d},scopedSlots:{default:function(t){var n=t.active,o=t.onClick,d=t.onDragEnter,b=t.onDragLeave,E=t.onDragOver,D=t.onDrop,O=t.onMouseEnter,j=t.onMouseLeave;return e("div",Object.assign({},{style:Object.assign({},{alignItems:"center",display:"flex",justifyContent:"center",position:"relative",borderStyle:"dashed",borderWidth:"1px",borderColor:n?"red":"grey"},S),props:{disabled:l||y,outlined:!0}},l||y||g?{}:{on:{click:o,dragenter:d,dragleave:b,dragover:E,drop:D,mouseenter:O,mouseleave:j}}),[e("VFadeTransition",{props:{leaveAbsolute:!0}},[p?e("VIcon",{style:h,props:{color:"success",large:!0},key:1},v):u?e("VIcon",{style:s,props:{color:"error",large:!0},key:2},c):g?e("VProgressCircular",{props:{color:"primary",indeterminate:!f,rotate:-90,size:64,value:100*f,width:4}},[e("VBtn",{props:{icon:!0,large:!0,text:!0},on:{click:function(e){e.preventDefault(),e.stopPropagation(),i()}}},[e("VIcon",{style:a},r)])]):e("VIcon",{style:I,props:{color:n?"primary":void 0,size:"128px"},key:0},m)])])}}})}};function t(){}function n(e){return new Promise((function(t){setTimeout(t,e)}))}var o={type:Boolean,default:!1},r={type:Boolean,default:!1},a={type:Boolean,default:!1},i={type:Boolean,default:!1},l={type:Boolean,default:!1},c={type:Boolean,default:!1};var s={components:{MyFileUpload:{data:function(){return{dragEnter:!1,mouseEnter:!1}},computed:{active:function(){var e=this.dragEnter,t=this.mouseEnter;return e||t}},methods:{onClick:function(e){var t=this;e.preventDefault(),e.stopPropagation();var n=document.createElement("input");n.setAttribute("type","file"),n.addEventListener("change",(function(e){e.preventDefault();var n=e.target.files;n&&n.length&&t.$emit("load",n[0])})),n.click()},onDragEnter:function(e){e.preventDefault(),e.stopPropagation(),this.dragEnter=!0},onDragLeave:function(e){e.preventDefault(),e.stopPropagation(),this.dragEnter=!1},onDragOver:function(e){e.preventDefault(),e.stopPropagation()},onDrop:function(e){e.preventDefault(),e.stopPropagation(),this.dragEnter=!1;var t=e.dataTransfer.files;t&&1===t.length&&this.$emit("load",t[0])},onMouseEnter:function(e){e.preventDefault(),e.stopPropagation(),this.mouseEnter=!0},onMouseLeave:function(e){e.preventDefault(),e.stopPropagation(),this.mouseEnter=!1}},render:function(){var e=this.$scopedSlots,t=this.active,n=this.onClick,o=this.onDragEnter,r=this.onDragLeave,a=this.onDragOver,i=this.onDrop,l=this.onMouseEnter,c=this.onMouseLeave;return e.default({active:t,onClick:n,onDragEnter:o,onDragLeave:r,onDragOver:a,onDrop:i,onMouseEnter:l,onMouseLeave:c})}},MyImageUpload:e},computed:{originalImage:{get:function(){return this.frozenOriginalImage.value},set:function(e){this.frozenOriginalImage=Object.freeze({value:e})}},originalImageDataURL:function(){var e=this.originalImage;return e?e.src:null},originalImageHeight:function(){var e=this.originalImage;return e?e.naturalHeight:0},originalImageWidth:function(){var e=this.originalImage;return e?e.naturalWidth:0}},data:function(){return{cancelLoad:t,frozenOriginalImage:Object.freeze({value:null}),loadError:!1,loading:!1,loadProgress:0,loadSuccess:!1}},inject:{theme:{default:{isDark:!1}}},methods:{clear:function(){this.originalImage=null},load:function(e){var o,r=this;o=function(){var o=r.cancelLoad;o();var a=!1,i=function(){if(a)throw 0},l=t;return o=function(){a=!0,l(),Object.assign(r,{loading:!1,loadProgress:0})},Object.assign(r,{cancelLoad:o,loadError:!1,loadSuccess:!1,loading:!0,loadProgress:0}),n(1e3).then((function(){i();var o=new FileReader,a=new Promise((function(e,t){o.addEventListener("progress",(function(e){e.lengthComputable&&Object.assign(r,{loadProgress:e.loaded/e.total})})),o.addEventListener("load",e),o.addEventListener("abort",t),o.addEventListener("error",t)}));return l=function(){o.abort()},o.readAsDataURL(e),a.then((function(){i();var e=new Image,a=new Promise((function(t,n){e.addEventListener("load",t),e.addEventListener("error",n)}));return l=t,e.src=o.result,n(1e3).then((function(){return a})).then((function(){return i(),Object.assign(r,{loadSuccess:!0}),n(1e3).then((function(){i(),Object.assign(r,{originalImage:e})}))}))}))})).catch((function(){a||Object.assign(r,{loadError:!0})})).finally((function(){a||Object.assign(r,{cancelLoad:t,loading:!1})}))},new Promise((function(e){e(o())}))}},name:"VImageInput",props:{cancelIcon:{type:String,default:"$cancel"},cancelIconStyle:Object,clearable:o,clearIcon:{type:String,default:"$clear"},clearIconStyle:Object,debounce:{type:Number,default:0},disabled:r,errorIcon:{type:String,default:"$error"},errorIconStyle:Object,flipHorizontallyIcon:{type:String,default:"mdi-flip-horizontal"},flipHorizontallyIconStyle:Object,flipVerticallyIcon:{type:String,default:"mdi-flip-vertical"},flipVerticallyIconStyle:Object,fullHeight:a,fullWidth:i,hideActions:l,imageBackgroundColor:String,imageFormat:{type:String,default:"png"},imageHeight:{type:Number,default:256},imageMaxScaling:{type:Number,default:1},imageMinScaling:{type:String,default:"cover"},imageQuality:{},imageWidth:{type:Number,default:256},name:String,overlayBackgroundColor:{type:String,default:"rgba(0,0,0,0.5)"},overlayBorderColor:{type:String,default:"#fff"},overlayBorderWidth:{type:String,default:"4px"},overlayPadding:{type:String,default:"50px"},readonly:c,rotateClockwiseIcon:{type:String,default:"mdi-rotate-right"},rotateClockwiseIconStyle:Object,rotateCounterClockwiseIcon:{type:String,default:"mdi-rotate-left"},rotateCounterClockwiseIconStyle:Object,successIcon:{type:String,default:"$success"},successIconStyle:Object,uploadIcon:{type:String,default:"mdi-upload"},uploadIconStyle:Object,value:String,backgroundColor:{},maxScaling:{},minScaling:{},rotateCounterclockwiseIcon:{},rotateCounterclockwiseIconStyle:{},scalingSliderColor:{}},render:function(e){var t=this.fullHeight,n=this.fullWidth,o=this.loadError,r=this.loading,a=this.loadProgress,i=this.loadSuccess,l=this.originalImageHeight,c=this.originalImageWidth;return e("div",{style:Object.assign({},t?{height:"100%"}:{},n?{width:"100%"}:{})},[e("MyImageUpload",{style:{height:"100%",width:"100%"}}),e("div","loadError: "+o),e("div","loadSuccess: "+i),e("div","loading: "+r),e("div","loadProgress: "+a),e("div","originalImageWidth: "+c),e("div","originalImageHeight: "+l)])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(s.name,s),s}));
