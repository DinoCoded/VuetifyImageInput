!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).VuetifyImageInput=t()}(this,(function(){"use strict";function e(){}function t(e){return new Promise((function(t){setTimeout(t,e)}))}var n={load:function(n){var r,o=this;r=function(){var r=o.cancelLoad;r();var a=!1,i=function(){if(a)throw 0},l=e;return r=function(){a=!0,l()},Object.assign(o,{cancelLoad:r,loadError:!1,loadSuccess:!1,loading:!0,loadProgress:0}),t(200).then((function(){i();var r=new FileReader,a=new Promise((function(e,t){r.addEventListener("progress",(function(e){e.lengthComputable&&Object.assign(o,{loadProgress:e.loaded/e.total})})),r.addEventListener("load",e),r.addEventListener("abort",t),r.addEventListener("error",t)}));return l=function(){r.abort()},r.readAsDataURL(n),a.then((function(){i();var n=new Image,a=new Promise((function(e,t){n.addEventListener("load",e),n.addEventListener("error",t)}));return l=e,n.src=r.result,a.then((function(){return i(),Object.assign(o,{loadSuccess:!0}),t(200).then((function(){i(),Object.assign(o,{originalImage:n,originalImageDataURL:n.src,originalImageHeight:n.naturalHeight,originalImageWidth:n.naturalWidth})}))}))}))})).catch((function(){a||Object.assign(o,{loadError:!0})})).finally((function(){a||Object.assign(o,{cancelLoad:e,loading:!1})}))},new Promise((function(e){e(r())}))}},r={type:Boolean,default:!1},o={type:Boolean,default:!1},a={type:Boolean,default:!1},i={type:Boolean,default:!1},l={type:Boolean,default:!1},d={type:Boolean,default:!1};var c={name:"VImageInput",components:{MyFileUpload:{props:{disabled:{}},data:function(){return{dragEnter:!1}},computed:{active:function(){return!this.disabled&&!!this.dragEnter}},methods:{onClick:function(e){var t=this;if(e.preventDefault(),!this.disabled){var n=document.createElement("input");n.setAttribute("type","file"),n.addEventListener("change",(function(e){e.preventDefault();var n=e.target.files;n&&n.length&&t.$emit("load",n[0])})),n.click()}},onDragEnter:function(e){e.preventDefault(),this.dragEnter=!0},onDragLeave:function(e){e.preventDefault(),this.dragEnter=!1},onDragOver:function(e){e.preventDefault()},onDrop:function(e){if(e.preventDefault(),this.dragEnter=!1,!this.disabled){var t=e.dataTransfer.files;t&&1===t.length&&this.$emit("load",t[0])}}},render:function(){var e=this.$scopedSlots,t=this.active,n=this.onClick,r=this.onDragEnter,o=this.onDragLeave,a=this.onDragOver,i=this.onDrop;return e.default({active:t,onClick:n,onDragEnter:r,onDragLeave:o,onDragOver:a,onDrop:i})}},MyImageUpload:{functional:!0,render:function(e,t){var n=t.data,r=t.parent,o=r.disabled,a=r.errorIcon,i=r.errorIconStyle,l=r.load,d=r.loadError,c=r.loading,s=r.loadProgress,u=r.loadSuccess,g=r.successIcon,f=r.successIconStyle,p=r.uploadIcon,y=r.uploadIconStyle,h=n.style;return e("MyFileUpload",{props:{disabled:o},on:{load:l},scopedSlots:{default:function(t){t.active;var n=t.onClick,r=t.onDragEnter,l=t.onDragLeave,v=t.onDragOver,m=t.onDrop;return e("VCard",{style:Object.assign({},{alignItems:"center",display:"flex",justifyContent:"center",position:"relative"},h),props:{disabled:o,outlined:!0},on:{click:n,dragenter:r,dragleave:l,dragover:v,drop:m}},[e("VFadeTransition",{props:{leaveAbsolute:!0}},[function(){if(u)return e("VIcon",{style:f,props:{color:"success",large:!0},key:1},g);if(d)return e("VIcon",{style:i,props:{color:"error",large:!0},key:2},a);if(c){var t=100*s;return e("VProgressCircular",{props:{color:"primary",indeterminate:!t,rotate:-90,size:64,value:t,width:4}},[e("VIcon",{style:y,props:{large:!0}},p)])}return e("VIcon",{style:y,props:{large:!0},key:0},p)}()])])}}})}}},props:{clearable:r,clearIcon:{type:String,default:"$clear"},clearIconStyle:Object,debounce:{type:Number,default:0},disabled:o,errorIcon:{type:String,default:"$error"},errorIconStyle:Object,flipHorizontallyIcon:{type:String,default:"mdi-flip-horizontal"},flipHorizontallyIconStyle:Object,flipVerticallyIcon:{type:String,default:"mdi-flip-vertical"},flipVerticallyIconStyle:Object,fullHeight:a,fullWidth:i,hideActions:l,imageBackgroundColor:String,imageFormat:{type:String,default:"png"},imageHeight:{type:Number,default:256},imageMaxScaling:{type:Number,default:1},imageMinScaling:{type:String,default:"cover"},imageQuality:{},imageWidth:{type:Number,default:256},name:String,overlayBackgroundColor:{type:String,default:"rgba(0,0,0,0.5)"},overlayBorderColor:{type:String,default:"#fff"},overlayBorderWidth:{type:String,default:"4px"},overlayPadding:{type:String,default:"50px"},readonly:d,rotateClockwiseIcon:{type:String,default:"mdi-rotate-right"},rotateClockwiseIconStyle:Object,rotateCounterClockwiseIcon:{type:String,default:"mdi-rotate-left"},rotateCounterClockwiseIconStyle:Object,successIcon:{type:String,default:"$success"},successIconStyle:Object,uploadIcon:{type:String,default:"mdi-upload"},uploadIconStyle:Object,value:String,backgroundColor:{},maxScaling:{},minScaling:{},rotateCounterclockwiseIcon:{},rotateCounterclockwiseIconStyle:{},scalingSliderColor:{}},data:function(){return{cancelLoad:e,loadError:!1,loading:!1,loadProgress:0,loadSuccess:!1,originalImage:null,originalImageDataURL:null,originalImageHeight:0,originalImageWidth:0}},methods:n,render:function(e){var t=this.fullHeight,n=this.fullWidth,r=this.loadError,o=this.loadSuccess,a=this.loading,i=this.loadProgress;return e("div",{style:Object.assign({},t?{height:"100%"}:{},n?{width:"100%"}:{})},[e("MyImageUpload",{style:{height:"100%",width:"100%"}}),e("div","loadError: "+r),e("div","loadSuccess: "+o),e("div","loading: "+a),e("div","loadProgress: "+i)])}};return"undefined"!=typeof window&&window.Vue&&window.Vue.component(c.name,c),c}));
